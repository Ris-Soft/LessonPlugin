<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>通知设置</title>
    <link rel="stylesheet" href="../../renderer/titlebar.css" />
    <link rel="stylesheet" href="../../renderer/settings.css" />
    <link rel="stylesheet" href="../../renderer/remixicon-local.css" />
    <style>
      .form { display: flex; flex-direction: column; gap: 12px; }
      .setting-item { display: grid; grid-template-columns: 28px 1fr auto; gap: 12px; align-items: center; }
      .setting-icon { text-align: center; color: var(--text-secondary); }
      .setting-title { font-weight: 600; }
      .setting-desc { color: var(--text-secondary); font-size: 12px; }
      .inline { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
      /* 卡片风格（使用主设置页的面板色，避免绿色底色） */
      .box { border-radius: 12px; background: var(--panel); border: 1px solid var(--border); padding: 16px; }
      .setting-item { border-bottom: none !important; padding: 8px 0; }
      .section { gap: 8px; }
      /* 选择控件采用主程序设置页样式（由 settings.css 提供） */
      .setting-action select, .setting-action input[type="text"], .setting-action input[type="range"] { min-width: 220px; }
    </style>
  </head>
  <body>
    <div class="titlebar">
      <div class="drag">通知设置</div>
      <div class="window-actions">
        <button class="win-btn" data-act="minimize" title="最小化"><i class="ri-subtract-line"></i></button>
        <button class="win-btn" data-act="maximize" title="最大化"><i class="ri-checkbox-blank-line"></i></button>
        <button class="win-btn close" data-act="close" title="关闭"><i class="ri-close-line"></i></button>
      </div>
    </div>
    <div class="wrap">
      <div class="section">
        <div class="section-title"><i class="ri-notification-3-line"></i> 通知设置</div>
        <div class="muted">配置播报与类型音频；通知展示在“通知运行窗口”。</div>
        <div class="box">
          <div class="form">
            <div class="setting-item">
              <div class="setting-icon"><i class="ri-speaker-line"></i></div>
              <div class="setting-main">
                <div class="setting-title">启用播报（TTS）</div>
                <div class="setting-desc">开启后按通知内容进行语音播报。</div>
              </div>
              <div class="setting-action">
                <label class="switch"><input id="enableTTS" type="checkbox" /><span class="slider"></span></label>
              </div>
            </div>

            <div class="setting-item">
              <div class="setting-icon"><i class="ri-cpu-line"></i></div>
              <div class="setting-main">
                <div class="setting-title">播报引擎</div>
                <div class="setting-desc">选择系统语音或 EdgeTTS。</div>
              </div>
              <div class="setting-action">
                <select id="ttsEngine">
                  <option value="system">系统语音（Web Speech）</option>
                  <option value="edge">EdgeTTS（需服务端）</option>
                </select>
              </div>
            </div>

            <div class="setting-item">
              <div class="setting-icon"><i class="ri-mic-2-line"></i></div>
              <div class="setting-main">
                <div class="setting-title">音色（系统语音）</div>
                <div class="setting-desc">选择用于播报的系统语音。</div>
              </div>
              <div class="setting-action">
                <select id="ttsVoice"></select>
              </div>
            </div>

            <div class="setting-item">
              <div class="setting-icon"><i class="ri-link-m"></i></div>
              <div class="setting-main">
                <div class="setting-title">EdgeTTS 服务地址</div>
                <div class="setting-desc">本地或远程服务，例如 http://localhost:5173/tts</div>
              </div>
              <div class="setting-action">
                <input id="ttsEndpoint" type="text" placeholder="http://localhost:5173/tts" />
              </div>
            </div>

            <div class="setting-item">
              <div class="setting-icon"><i class="ri-mic-line"></i></div>
              <div class="setting-main">
                <div class="setting-title">EdgeTTS 音色名称</div>
                <div class="setting-desc">如 zh-CN-XiaoxiaoNeural</div>
              </div>
              <div class="setting-action">
                <input id="ttsEdgeVoice" type="text" placeholder="zh-CN-XiaoxiaoNeural" />
              </div>
            </div>

            <div class="setting-item">
              <div class="setting-icon"><i class="ri-sound-module-line"></i></div>
              <div class="setting-main">
                <div class="setting-title">音高</div>
                <div class="setting-desc">调节播报音色的音高（0.5–2.0，默认1.0）。</div>
              </div>
              <div class="setting-action">
                <input id="ttsPitch" type="range" min="0.5" max="2" step="0.1" />
              </div>
            </div>

            <div class="setting-item">
              <div class="setting-icon"><i class="ri-speed-up-line"></i></div>
              <div class="setting-main">
                <div class="setting-title">语速</div>
                <div class="setting-desc">调节播报语速（0.5–2.0，默认1.0）。</div>
              </div>
              <div class="setting-action">
                <input id="ttsRate" type="range" min="0.5" max="2" step="0.1" />
              </div>
            </div>

            <div class="setting-item">
              <div class="setting-icon"><i class="ri-information-line"></i></div>
              <div class="setting-main">
                <div class="setting-title">信息类型音频</div>
                <div class="setting-desc">用于信息通知的提示音。</div>
              </div>
              <div class="setting-action"><input type="file" id="audioInfo" accept="audio/*" /></div>
            </div>

            <div class="setting-item">
              <div class="setting-icon"><i class="ri-alert-line"></i></div>
              <div class="setting-main">
                <div class="setting-title">警告类型音频</div>
                <div class="setting-desc">用于警告通知的提示音。</div>
              </div>
              <div class="setting-action"><input type="file" id="audioWarn" accept="audio/*" /></div>
            </div>

            <div class="setting-item">
              <div class="setting-icon"><i class="ri-close-circle-line"></i></div>
              <div class="setting-main">
                <div class="setting-title">错误类型音频</div>
                <div class="setting-desc">用于错误通知的提示音。</div>
              </div>
              <div class="setting-action"><input type="file" id="audioError" accept="audio/*" /></div>
            </div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title"><i class="ri-window-line"></i> 运行窗口</div>
        <div class="muted">通知展示窗口：<code>runtime.html</code>，由其它插件调用。</div>
      </div>
    </div>

    <script src="settings.js"></script>
  </body>
  </html>