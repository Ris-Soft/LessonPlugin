<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>功能市场</title>
    <link rel="stylesheet" href="/assets/remixicon.css" />
    <link rel="stylesheet" href="/assets/settings.css" />
    <style>
      body { overflow-y: auto !important; }
      .hidden { display: none !important; }
      .topbar { display:flex; gap:8px; }
      textarea { width: 100%; height: 40vh; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
      header.panel h1 i { font-size: 20px; color: var(--fg); }
      header.panel img { width: 28px; height: 28px; }
      .topbar .btn i { font-size: 16px; color: var(--fg); }
      .subnav .sub-item.btn { background: transparent; border: 1px solid var(--border); }
      .subnav .sub-item.btn.active { background: transparent; border-color: rgba(34, 197, 94, 0.45); color: var(--accent); }
      .about-hero { display:flex; align-items:center; justify-content:space-between; gap:16px; padding:24px; }
      .about-title .name { font-size:24px; font-weight:600; }
      .about-title .tagline { color: var(--muted); }
      .features { display:grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap:12px; padding:10px 20px 20px; }
      .feature-card i { color: var(--accent); font-size: 20px; }
    </style>
  </head>
  <body>
    <div class="site-topbar">
      <div class="site-logo"><img src="/logo.ico" alt="Logo" /></div>
      <div class="site-title"><i class="ri-store-2-line"></i> 功能市场</div>
      <nav class="site-nav">
        <a href="#home" data-nav="home" class="topnav-item"><i class="ri-home-3-line"></i> 首页</a>
        <a href="#market" data-nav="market" class="topnav-item"><i class="ri-store-2-line"></i> 在线功能市场</a>
        <a href="#dev" data-nav="dev" class="topnav-item"><i class="ri-tools-line"></i> 开发者平台</a>
      </nav>
      <span id="status" class="status" style="margin-left:auto"></span>
    </div>
    <main>
      <section id="page-home">
        <div class="panel">
          <div class="about-hero">
            <img class="about-logo" src="/logo.ico" alt="LessonPlugin" />
            <div class="about-title">
              <div class="name">LessonPlugin 功能市场</div>
              <div class="tagline">浏览、发现与获取功能模块</div>
            </div>
            <div class="about-links">
              <button data-nav="market" class="btn primary"><i class="ri-store-2-line"></i> 进入市场</button>
              <button data-nav="dev" class="btn secondary" style="margin-left:8px;"><i class="ri-tools-line"></i> 进入开发者平台</button>
            </div>
          </div>
          <div class="features">
            <div class="setting-card feature-card">
              <div class="field-header"><div class="field-title"><i class="ri-flashlight-line"></i> 快速安装</div><div class="field-desc">一键获取并启用功能模块</div></div>
            </div>
            <div class="setting-card feature-card">
              <div class="field-header"><div class="field-title"><i class="ri-shield-check-line"></i> 安全可信</div><div class="field-desc">统一依赖与版本管理</div></div>
            </div>
            <div class="setting-card feature-card">
              <div class="field-header"><div class="field-title"><i class="ri-puzzle-2-line"></i> 开放生态</div><div class="field-desc">插件、自动化与组件全面覆盖</div></div>
            </div>
            <div class="setting-card feature-card">
              <div class="field-header"><div class="field-title"><i class="ri-cloud-line"></i> 在线更新</div><div class="field-desc">随时获取最新能力</div></div>
            </div>
          </div>
        </div>
      </section>
      <section id="page-market" class="hidden">
        <header>
          <h1>功能市场</h1>
          <p>浏览、发现与获取功能模块</p>
        </header>
        <div class="subnav store-tabs" style="display:flex;align-items:center;gap:8px;">
          <div class="tabs-left inline" style="gap:8px;">
            <button class="sub-item btn secondary active" data-store-tab="comprehensive"><i class="ri-apps-2-line"></i> 综合</button>
            <button class="sub-item btn secondary" data-store-tab="plugins"><i class="ri-puzzle-line"></i> 插件</button>
            <button class="sub-item btn secondary" data-store-tab="automation"><i class="ri-timer-line"></i> 自动化</button>
            <button class="sub-item btn secondary" data-store-tab="components"><i class="ri-layout-3-line"></i> 组件</button>
            <button class="sub-item btn secondary" data-store-tab="updates"><i class="ri-refresh-line"></i> 功能更新</button>
          </div>
          <div class="tabs-right inline" style="gap:8px; margin-left:auto;">
            <input id="market-search-input" type="text" placeholder="搜索所有功能（插件/自动化/组件）" />
            <button id="market-search-btn" class="btn"><i class="ri-search-line"></i> 搜索</button>
            <button id="market-refresh-btn" class="btn secondary"><i class="ri-refresh-line"></i> 刷新</button>
          </div>
        </div>
        <div class="panel store-panel" style="display:grid;grid-template-columns:220px 1fr;gap:16px;align-items:start;">
          <div class="store-left">
            <div class="section-title"><i class="ri-list-check-2"></i> 分类</div>
            <div id="store-subnav" class="store-subnav chips" style="gap:6px;"></div>
          </div>
          <div class="store-right">
            <div id="store-grid" class="plugins"></div>
            <div id="store-empty" class="muted" style="padding:12px;" hidden>暂无内容</div>
          </div>
        </div>
      </section>
      <section id="page-dev" class="hidden">
        <div id="authBox" class="topbar" style="margin-bottom:12px;"></div>
        <div class="panel">
        <h3>发布功能</h3>
        <form id="publishForm" class="form">
          <select name="type">
            <option value="plugin">插件</option>
          <option value="component">组件</option>
          <option value="automation">自动化</option>
        </select>
        <input name="id" placeholder="唯一ID" />
        <input name="name" placeholder="名称" />
        <input name="version" placeholder="版本，如 1.0.0" />
        <input name="categories" placeholder="分类，逗号分隔" />
        <input name="author" placeholder="作者（可留空用登录名）" />
        <input name="icon" placeholder="图标类名（可选）" />
        <textarea name="description" placeholder="描述"></textarea>
        <button type="submit" class="btn primary"><i class="ri-upload-2-line"></i> 发布</button>
      </form>
      </div>
      <div class="panel">
        <h3>市场 JSON 编辑器</h3>
        <div class="topbar" style="margin-bottom:8px;">
          <button id="btnLoad" class="btn"><i class="ri-download-2-line"></i> 加载</button>
          <button id="btnSave" class="btn secondary"><i class="ri-save-3-line"></i> 保存</button>
          <button id="btnFormat" class="btn"><i class="ri-align-justify"></i> 格式化</button>
        </div>
        <textarea id="editor" spellcheck="false" placeholder="在此编辑市场 JSON（支持任何结构）"></textarea>
        <div class="list" style="margin-top:12px;">
          <h3>简览（尝试读取 items 或 plugins）</h3>
          <div id="list"></div>
        </div>
      </div>
      </section>
    </main>
  <script src="/app.js"></script>
  </body>
  </html>